(() => {
const defaultSchemeDark = window.matchMedia('(prefers-color-scheme: dark)').matches
const userScheme = window.localStorage.getItem('scheme');

if ((!userScheme && defaultSchemeDark) || userScheme === 'dark' ) {
 document.head.insertAdjacentHTML('beforeend', '<style id="scheme">:root{color-scheme:dark}</style>');
 document.documentElement.setAttribute('data-theme', 'dark')
 window.schemeChecked = true
}
else {
  document.head.insertAdjacentHTML('beforeend', '<style id="scheme">:root{color-scheme:light}</style>');
  document.documentElement.setAttribute('data-theme', 'light')
  window.schemeChecked = false
}
})()